language: cpp
matrix:
  include:
  - os: linux
    dist: trusty
    env: TOXENV=WIN
    sudo: false
  - os: linux
    dist: trusty
    sudo: false
  - os: osx
    osx_image: xcode9.4
addons:
  apt:
    packages:
    - g++-mingw-w64
    - cmake3
before_script:
- export PATH="$HOME/bin:$PATH"
- make -f texinfo-travis.mk install_texinfo
script:
- export REV=dirty-$(git describe --always)
- git clone https://github.com/planas/buildscripts.git
- chmod +x *.sh
- "./build.sh"
branches:
  except:
  - "/^*-v[0-9]/"
